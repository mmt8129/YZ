<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Y.Z</title>
    <style>
        /* TEMEL AYARLAR */
        :root {
            --bg-color: #ffffff;
            --text-color: #1a1a1a;
            --header-bg: #f8f9fa;
            --user-bubble: #007bff;
            --user-text: #ffffff;
            --bot-text: #1a1a1a;
            --accent-red: #ff4d4d;
            --font-size: 16px;
            --font-weight: 400;
        }

        .dark-theme {
            --bg-color: #000000;
            --text-color: #ffffff;
            --header-bg: #1a1a1a;
            --bot-text: #ffffff;
        }

        body {
            margin: 0; padding: 0;
			width: 100vw; /* EkranÄ±n tam geniÅŸliÄŸi */
			overflow-x: hidden; /* Yatay kaydÄ±rmayÄ± kesin olarak engeller */
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex; flex-direction: column;
            height: 100vh; overflow: hidden;
        }

        /* ÃœST BANNER */
        header {
            padding: 10px 15px;
            background: var(--header-bg);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--user-bubble);
        }

        .date-time { line-height: 1.2; }
        #time { font-size: 1.4rem; font-weight: 700; }
        #date { font-size: 0.85rem; opacity: 0.8; }

        .controls { display: flex; gap: 5px; }
        .controls button {
            border: 1px solid #ddd; background: white;
            border-radius: 8px; padding: 5px; cursor: pointer; font-size: 0.9rem;
        }

        /* MESAJ ALANI */
        #chat-container {
            flex: 1; overflow-y: auto; padding: 20px 0;
            display: flex; flex-direction: column; gap: 20px;
        }

        .message { max-width: 100%; padding: 10px 15px; font-size: var(--font-size); font-weight: var(--font-weight); line-height: 1.6; }
        
        /* Giden Mesaj: Mavi Balon */
        .user-msg {
            align-self: flex-end;
            background-color: var(--user-bubble);
            color: var(--user-text);
            border-radius: 18px 18px 0 18px;
            margin-right: 15px; max-width: 80%;
        }

        /* Gelen Mesaj: Ã‡erÃ§evesiz Tam GeniÅŸlik */
        .bot-msg {
            align-self: flex-start;
            background: transparent;
            color: var(--bot-text);
            width: 100%; margin: 0;
			padding: 15px; /* Okunabilirlik iÃ§in iÃ§ boÅŸluk */
			box-sizing: border-box; /* Padding dahil geniÅŸliÄŸi ayarlar, taÅŸmayÄ± Ã¶nler */
        }

        /* KÄ±rmÄ±zÄ± KalÄ±n YazÄ±lar */
        .bot-msg strong { color: var(--accent-red); font-weight: 700; }

        /* BEKLEME ANÄ°MASYONU */
        .dots { display: flex; gap: 5px; padding: 10px 15px; }
        .dot { width: 10px; height: 10px; background: var(--user-bubble); border-radius: 50%; opacity: 0.3; animation: blink 1.4s infinite; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        /* ... 6 nokta iÃ§in devam eder ... */

        @keyframes blink { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        /* ALT GÄ°RÄ°Å Ã‡UBUÄU */
        footer {
            padding: 15px; background: var(--header-bg);
            display: flex; gap: 10px; align-items: center;
        }

        .input-box {
            flex: 1; border: 1px solid #ccc; border-radius: 25px;
            padding: 10px 15px; background: var(--bg-color); color: var(--text-color);
        }

        .file-btn { font-size: 1.5rem; color: var(--user-bubble); cursor: pointer; }
        .send-btn { background: var(--user-bubble); color: white; border: none; border-radius: 20px; padding: 10px 20px; font-weight: bold; }
    </style>
</head>
<body id="main-body">

    <header>
        <div class="date-time">
            <div id="time">10:30</div>
            <div id="date">20 Åubat Cuma</div>
        </div>
        <div class="controls">
            <button onclick="changeZoom(1)">ğŸ”+</button>
            <button onclick="changeZoom(-1)">ğŸ”-</button>
            <button onclick="toggleBold(true)">B+</button>
            <button onclick="toggleBold(false)">B-</button>
            <button onclick="setTheme('dark')">ğŸŒ‘</button>
            <button onclick="setTheme('light')">â˜€ï¸</button>
        </div>
    </header>

    <main id="chat-container">
        <div class="message user-msg">Selam, bugÃ¼n hava nasÄ±l?</div>
        <div class="message bot-msg">BugÃ¼n gÃ¶kyÃ¼zÃ¼ <strong>parÃ§alÄ± bulutlu</strong> ve sÄ±caklÄ±k 15 derece civarÄ±nda olacak.</div>
    </main>

    <div id="waiting" class="dots" style="display:none;">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
    </div>

    <footer>
        <label class="file-btn">+</label>
        <input type="text" class="input-box" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n...">
       <button class="send-btn" onclick="sendMessage()">GÃ¶nder</button>
    </footer>

    <script>
	
	// Mesaj gÃ¶nderme fonksiyonu
const API_KEY = 'AIzaSyCl7FDwq98P20hwIJrQUFxu5mbd35Q1ZGI';
const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${API_KEY}`;

async function sendMessage() {
    const input = document.querySelector('.input-box');
    const messageText = input.value.trim();
    if (messageText === "") return;

    addMessage(messageText, 'user-msg');
    input.value = "";
    showLoading(true);

    try {
        const response = await fetch(API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: messageText }] }]
            })
        });

        const data = await response.json();
        let botResponse = data.candidates[0].content.parts[0].text;

        // Filtreleme: Parantez iÃ§indeki linkleri temizle
        botResponse = botResponse.replace(/\((https?:\/\/[^\s]+)\)/g, '');

        showLoading(false);
        
        // Kelime kelime yazdÄ±rma fonksiyonunu Ã§aÄŸÄ±rÄ±yoruz
        typeWriterEffect(botResponse);

    } catch (error) {
        showLoading(false);
        addMessage("Hata: API baÄŸlantÄ±sÄ± kurulamadÄ±. " + error.message, 'bot-msg');
    }
}

function typeWriterEffect(text) {
    const chatContainer = document.getElementById('chat-container');
    const msgDiv = document.createElement('div');
    msgDiv.className = 'message bot-msg';
    chatContainer.appendChild(msgDiv);

    const words = text.split(' ');
    let i = 0;

    const interval = setInterval(() => {
        if (i < words.length) {
            // KalÄ±n yazÄ±larÄ± kÄ±rmÄ±zÄ±ya Ã§evirme mantÄ±ÄŸÄ±nÄ± burada uyguluyoruz
            let word = words[i];
            if (word.startsWith('**') && word.endsWith('**')) {
                word = `<strong>${word.replace(/\*\*/g, '')}</strong> `;
            } else {
                word += ' ';
            }
            
            msgDiv.innerHTML += word;
            chatContainer.scrollTop = chatContainer.scrollHeight;
            i++;
        } else {
            clearInterval(interval);
        }
    }, 500); // 0.5 saniye hÄ±zÄ±nda
}

// Ekrana yeni mesaj balonu ekleyen yardÄ±mcÄ± fonksiyon
function addMessage(text, className) {
    const chatContainer = document.getElementById('chat-container');
    const msgDiv = document.createElement('div');
    msgDiv.className = `message ${className}`;
    msgDiv.innerHTML = text; // HTML desteÄŸi iÃ§in (KalÄ±n/KÄ±rmÄ±zÄ± yazÄ±lar iÃ§in)
    
    chatContainer.appendChild(msgDiv);
    
    // Her mesaj eklendiÄŸinde en aÅŸaÄŸÄ± kaydÄ±r
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

// YÃ¼kleme animasyonunu aÃ§/kapat
function showLoading(isVisible) {
    const loading = document.getElementById('waiting');
    loading.style.display = isVisible ? 'flex' : 'none';
    if (isVisible) {
        loading.scrollIntoView();
    }
}
	// Global deÄŸiÅŸkenler: AyarlarÄ±n durumunu saklar
let currentFontSize = 16;
let isBold = false;

// YazÄ± Boyutu DeÄŸiÅŸtirme (Y+ / Y-)
function changeZoom(step) {
    currentFontSize += (step * 2); // Her basÄ±ÅŸta 2 birim bÃ¼yÃ¼t/kÃ¼Ã§Ã¼lt
    if (currentFontSize < 12) currentFontSize = 12; // Ã‡ok kÃ¼Ã§Ã¼lmesini engelle
    if (currentFontSize > 30) currentFontSize = 30; // Ã‡ok bÃ¼yÃ¼mesini engelle
    
    // Mesaj alanÄ±ndaki tÃ¼m yazÄ±larÄ±n boyutunu gÃ¼ncelle
    document.getElementById('chat-container').style.setProperty('--font-size', currentFontSize + 'px');
}

// YazÄ± KalÄ±nlÄ±ÄŸÄ± DeÄŸiÅŸtirme (B+ / B-)
function toggleBold(status) {
    isBold = status;
    const weight = isBold ? '700' : '400';
    document.getElementById('chat-container').style.setProperty('--font-weight', weight);
}

// Tema DeÄŸiÅŸtirme (ğŸŒ‘ / â˜€ï¸)
function setTheme(mode) {
    const body = document.getElementById('main-body');
    if (mode === 'dark') {
        body.classList.add('dark-theme');
    } else {
        body.classList.remove('dark-theme');
    }
}
	function updateDateTime() {
    const now = new Date();
    
    // Saati formatla (Ã–rn: 14:05)
    const timeString = now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
    
    // Tarihi formatla (Ã–rn: 20 Åubat Cuma)
    const options = { day: 'numeric', month: 'long', weekday: 'long' };
    const dateString = now.toLocaleDateString('tr-TR', options);
    
    document.getElementById('time').textContent = timeString;
    document.getElementById('date').textContent = dateString;
}

// Her saniye gÃ¼ncelle
setInterval(updateDateTime, 1000);
updateDateTime(); // Sayfa aÃ§Ä±lÄ±nca hemen Ã§alÄ±ÅŸtÄ±r
        // Tema ve Font FonksiyonlarÄ± buraya gelecek
        function setTheme(mode) {
            document.getElementById('main-body').className = (mode === 'dark' ? 'dark-theme' : '');
        }
        // DiÄŸer butonlar iÃ§in JavaScript'i bir sonraki adÄ±mda yazacaÄŸÄ±z.
    </script>
</body>
</html>
